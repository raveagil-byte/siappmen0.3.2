import{d as B,B as b,u as x,r as d,C as T,c as R,w as t,b as a,o as p,e,q as U,v as h,D as q,s as w,i as o,y as D,f as m,z as v,E as I,F as y,t as c,G as k,H as Q,A as N,l as V,x as F,j as H,J as M,n as j,p as E,K}from"./index-32020cdc.js";import{a as P}from"./index-982fae57.js";import{Q as z}from"./QRScannerMobile-c49c0d7d.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const G={class:"scan-container"},J={class:"scan-info"},L={key:0,class:"unit-info"},O=B({__name:"ScanUnit",setup($){const C=b(),_=x(),l=d(""),s=d(null),u=d("");T(()=>{l.value=C.query.type||"steril"});const S=async f=>{var n,r;try{const i=await K.post("/transactions/scan-unit",{qr_content:f,transaction_type:l.value});s.value=i.data.data.unit}catch(i){u.value=((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to scan QR code"}},g=()=>{l.value==="steril"?_.push({path:"/distribusi-steril",query:{unit_id:s.value.id}}):_.push({path:"/kotor-pickup",query:{unit_id:s.value.id}})};return(f,n)=>(p(),R(a(E),null,{default:t(()=>[e(a(D),null,{default:t(()=>[e(a(U),null,{default:t(()=>[e(a(h),{slot:"start"},{default:t(()=>[e(a(q),{"default-href":"/home"})]),_:1}),e(a(w),null,{default:t(()=>[...n[1]||(n[1]=[o("Scan Unit QR",-1)])]),_:1})]),_:1})]),_:1}),e(a(j),{fullscreen:!0},{default:t(()=>[m("div",G,[m("div",J,[e(a(v),null,{default:t(()=>[e(a(I),null,{default:t(()=>[e(a(y),null,{default:t(()=>[o(c(l.value==="steril"?"Distribusi Steril":"Pengambilan Kotor"),1)]),_:1}),e(a(k),null,{default:t(()=>[...n[2]||(n[2]=[o("Scan QR Unit untuk memulai transaksi",-1)])]),_:1})]),_:1})]),_:1})]),e(z,{onScan:S}),s.value?(p(),Q("div",L,[e(a(v),null,{default:t(()=>[e(a(I),null,{default:t(()=>[e(a(y),null,{default:t(()=>[o(c(s.value.name),1)]),_:1}),e(a(k),null,{default:t(()=>[o(c(s.value.location),1)]),_:1})]),_:1}),e(a(N),null,{default:t(()=>[e(a(V),{expand:"block",onClick:g},{default:t(()=>[n[3]||(n[3]=o(" Lanjutkan ",-1)),e(a(F),{icon:a(P),slot:"end"},null,8,["icon"])]),_:1})]),_:1})]),_:1})])):H("",!0)]),e(a(M),{"is-open":!!u.value,message:u.value,duration:3e3,color:"danger",onDidDismiss:n[0]||(n[0]=r=>u.value="")},null,8,["is-open","message"])]),_:1})]),_:1}))}});const aa=A(O,[["__scopeId","data-v-e0a602c1"]]);export{aa as default};
