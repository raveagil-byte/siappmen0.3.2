import{d as T,r as p,C as V,K as h,c as _,w as t,b as e,o as u,e as o,q as b,v as R,D,s as H,i as s,y as N,U as L,V as M,f as d,W as U,X as v,h as m,I as F,H as k,M as K,N as j,x as q,Y as z,Z as E,j as O,n as P,p as W,g as X,t as i,R as C}from"./index-32020cdc.js";import{d as Y}from"./index-982fae57.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const A={class:"content-container"},G={key:1,class:"empty-state"},J=T({__name:"History",setup(Q){const r=p("all"),c=p([]),f=p(1),I=p(!0);V(()=>{g()});const g=async()=>{try{f.value=1;const n={page:f.value};r.value!=="all"&&(n.type=r.value);const a=await h.get("/transactions",{params:n});c.value=a.data.data.data,I.value=a.data.data.current_page<a.data.data.last_page}catch(n){console.error("Failed to fetch transactions:",n)}},x=async n=>{f.value++;try{const a={page:f.value};r.value!=="all"&&(a.type=r.value);const l=await h.get("/transactions",{params:a});c.value.push(...l.data.data.data),I.value=l.data.data.current_page<l.data.data.last_page}catch(a){console.error("Failed to load more:",a)}finally{n.target.complete()}},B=async n=>{await g(),n.target.complete()},w=n=>({pending:"warning",validated:"success",cancelled:"danger"})[n]||"medium",S=n=>new Date(n).toLocaleString("id-ID");return(n,a)=>(u(),_(e(W),null,{default:t(()=>[o(e(N),null,{default:t(()=>[o(e(b),null,{default:t(()=>[o(e(R),{slot:"start"},{default:t(()=>[o(e(D),{"default-href":"/home"})]),_:1}),o(e(H),null,{default:t(()=>[...a[1]||(a[1]=[s("Riwayat Transaksi",-1)])]),_:1})]),_:1})]),_:1}),o(e(P),{fullscreen:!0},{default:t(()=>[o(e(L),{slot:"fixed",onIonRefresh:B},{default:t(()=>[o(e(M))]),_:1}),d("div",A,[o(e(U),{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value=l),onIonChange:g},{default:t(()=>[o(e(v),{value:"all"},{default:t(()=>[o(e(m),null,{default:t(()=>[...a[2]||(a[2]=[s("Semua",-1)])]),_:1})]),_:1}),o(e(v),{value:"steril"},{default:t(()=>[o(e(m),null,{default:t(()=>[...a[3]||(a[3]=[s("Steril",-1)])]),_:1})]),_:1}),o(e(v),{value:"kotor"},{default:t(()=>[o(e(m),null,{default:t(()=>[...a[4]||(a[4]=[s("Kotor",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),c.value.length>0?(u(),_(e(F),{key:0},{default:t(()=>[(u(!0),k(j,null,K(c.value,l=>(u(),_(e(X),{key:l.id,button:""},{default:t(()=>[o(e(m),null,{default:t(()=>{var y;return[d("h2",null,[s(" Transaksi #"+i(l.id)+" ",1),o(e(C),{color:l.type==="steril"?"success":"warning"},{default:t(()=>[s(i(l.type.toUpperCase()),1)]),_:2},1032,["color"])]),d("h3",null,i((y=l.unit)==null?void 0:y.name),1),d("p",null,i(S(l.created_at)),1)]}),_:2},1024),o(e(C),{slot:"end",color:w(l.status)},{default:t(()=>[s(i(l.status.toUpperCase()),1)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})):(u(),k("div",G,[o(e(q),{icon:e(Y),size:"large"},null,8,["icon"]),a[5]||(a[5]=d("p",null,"Belum ada transaksi",-1))]))]),I.value?(u(),_(e(z),{key:0,onIonInfinite:x,threshold:"100px"},{default:t(()=>[o(e(E))]),_:1})):O("",!0)]),_:1})]),_:1}))}});const te=Z(J,[["__scopeId","data-v-2b0a2533"]]);export{te as default};
