import{d as x,u as B,r as p,c as m,w as l,b as a,o as I,e,q as w,v as R,D as Q,s as D,i as r,y as N,f as u,z as g,E as k,F as y,G as C,t as i,R as h,A as M,I as q,g as _,h as v,l as F,j as L,J as A,P as H,n as K,p as P,K as T,Q as U}from"./index-32020cdc.js";import{Q as $}from"./QRScannerMobile-c49c0d7d.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-982fae57.js";const z={class:"content-container"},E=x({__name:"ValidasiSteril",setup(G){const b=B(),n=p(null),o=p(!1),d=p(""),S=async c=>{var t,s;try{o.value=!0;const f=await T.post("/transactions/scan-transaction",{qr_content:c});n.value=f.data.data.transaction}catch(f){d.value=((s=(t=f.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to scan QR code"}finally{o.value=!1}},V=async()=>{var c,t;try{o.value=!0,await T.post("/transactions/validate",{qr_content:`TRANS:${n.value.uuid}`}),await(await U.create({header:"Sukses",message:"Transaksi berhasil divalidasi",buttons:[{text:"OK",handler:()=>{b.push("/home")}}]})).present()}catch(s){d.value=((t=(c=s.response)==null?void 0:c.data)==null?void 0:t.message)||"Failed to validate transaction"}finally{o.value=!1}};return(c,t)=>(I(),m(a(P),null,{default:l(()=>[e(a(N),null,{default:l(()=>[e(a(w),null,{default:l(()=>[e(a(R),{slot:"start"},{default:l(()=>[e(a(Q),{"default-href":"/home"})]),_:1}),e(a(D),null,{default:l(()=>[...t[1]||(t[1]=[r("Validasi Transaksi",-1)])]),_:1})]),_:1})]),_:1}),e(a(K),{fullscreen:!0},{default:l(()=>[u("div",z,[e(a(g),null,{default:l(()=>[e(a(k),null,{default:l(()=>[e(a(y),null,{default:l(()=>[...t[2]||(t[2]=[r("Scan QR Transaksi",-1)])]),_:1}),e(a(C),null,{default:l(()=>[...t[3]||(t[3]=[r("Scan QR code untuk validasi transaksi",-1)])]),_:1})]),_:1})]),_:1}),e($,{onScan:S}),n.value?(I(),m(a(g),{key:0},{default:l(()=>[e(a(k),null,{default:l(()=>[e(a(y),null,{default:l(()=>[r("Transaksi #"+i(n.value.id),1)]),_:1}),e(a(C),null,{default:l(()=>[e(a(h),{color:n.value.type==="steril"?"success":"warning"},{default:l(()=>[r(i(n.value.type.toUpperCase()),1)]),_:1},8,["color"])]),_:1})]),_:1}),e(a(M),null,{default:l(()=>[e(a(q),null,{default:l(()=>[e(a(_),null,{default:l(()=>[e(a(v),null,{default:l(()=>{var s;return[t[4]||(t[4]=u("p",null,"Unit",-1)),u("h3",null,i((s=n.value.unit)==null?void 0:s.name),1)]}),_:1})]),_:1}),e(a(_),null,{default:l(()=>[e(a(v),null,{default:l(()=>{var s;return[t[5]||(t[5]=u("p",null,"Dibuat oleh",-1)),u("h3",null,i((s=n.value.creator)==null?void 0:s.name),1)]}),_:1})]),_:1}),e(a(_),null,{default:l(()=>[e(a(v),null,{default:l(()=>[t[6]||(t[6]=u("p",null,"Total Items",-1)),u("h3",null,i(n.value.total_items),1)]),_:1})]),_:1})]),_:1}),e(a(F),{expand:"block",color:"success",onClick:V,disabled:o.value,class:"validate-button"},{default:l(()=>[r(i(o.value?"Memvalidasi...":"Validasi Transaksi"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):L("",!0)]),e(a(A),{"is-open":!!d.value,message:d.value,duration:3e3,color:"danger",onDidDismiss:t[0]||(t[0]=s=>d.value="")},null,8,["is-open","message"]),e(a(H),{"is-open":o.value,message:"Memproses..."},null,8,["is-open"])]),_:1})]),_:1}))}});const Y=j(E,[["__scopeId","data-v-cd156416"]]);export{Y as default};
