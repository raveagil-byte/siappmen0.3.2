import{r as c,m as y,c as u,a as t,F as C,n as k,t as n,p,e as T,o as i}from"./index-DsZrCc_L.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"transactions"},x=["onClick"],P=["onClick","disabled"],B={class:"pagination"},F=["disabled"],S=["disabled"],U=10,$={__name:"Transactions",setup(A){const d=c([]),s=c(1),r=c(!1),_=T(),o=async()=>{try{const a=await p.get("/transactions",{params:{page:s.value,per_page:U}});d.value=a.data.data.data,r.value=a.data.data.current_page<a.data.data.last_page}catch{alert("Failed to fetch transactions")}},h=a=>new Date(a).toLocaleString(),v=a=>{_.push({name:"TransactionDetail",params:{id:a}})},m=async a=>{if(confirm("Are you sure you want to cancel this transaction?"))try{await p.post(`/transactions/${a}/cancel`,{reason:"Cancelled by user"}),alert("Transaction cancelled"),o()}catch{alert("Failed to cancel transaction")}},f=()=>{r.value&&(s.value++,o())},g=()=>{s.value>1&&(s.value--,o())};return y(()=>{o()}),(a,l)=>(i(),u("div",D,[l[1]||(l[1]=t("h1",null,"Transactions",-1)),t("table",null,[l[0]||(l[0]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Type"),t("th",null,"Unit"),t("th",null,"Status"),t("th",null,"Created By"),t("th",null,"Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[(i(!0),u(C,null,k(d.value,e=>(i(),u("tr",{key:e.id},[t("td",null,"#"+n(e.id),1),t("td",null,n(e.type.toUpperCase()),1),t("td",null,n(e.unit?.name),1),t("td",null,n(e.status.toUpperCase()),1),t("td",null,n(e.creator?.name),1),t("td",null,n(h(e.created_at)),1),t("td",null,[t("button",{onClick:b=>v(e.id)},"View",8,x),t("button",{onClick:b=>m(e.id),disabled:e.status!=="pending"},"Cancel",8,P)])]))),128))])]),t("div",B,[t("button",{onClick:g,disabled:s.value<=1},"Prev",8,F),t("span",null,"Page "+n(s.value),1),t("button",{onClick:f,disabled:!r.value},"Next",8,S)])]))}},M=w($,[["__scopeId","data-v-c1b4631f"]]);export{M as default};
