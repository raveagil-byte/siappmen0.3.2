import{r as o,m as $,c as i,a as e,b,d as p,v,w as c,F as x,n as V,p as f,o as r,t as y}from"./index-DsZrCc_L.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"instruments"},U={key:0,class:"form-popup"},A=["onClick"],B=["onClick"],E={key:1,class:"form-popup"},M={__name:"Instruments",setup(S){const u=o([]),d=o(!1),m=o(!1),a=o({name:"",description:""}),s=o({id:null,name:"",description:""}),I=async()=>{try{const l=await f.get("/instruments");u.value=l.data.data}catch{alert("Failed to fetch instruments")}},k=async()=>{try{const l=await f.post("/instruments",a.value);u.value.push(l.data.data),a.value={name:"",description:""},d.value=!1}catch{alert("Failed to create instrument")}},C=l=>{s.value=Object.assign({},l),m.value=!0},w=async()=>{try{await f.put(`/instruments/${s.value.id}`,{name:s.value.name,description:s.value.description});const l=u.value.findIndex(t=>t.id===s.value.id);l!==-1&&(u.value[l]=Object.assign({},s.value)),m.value=!1}catch{alert("Failed to update instrument")}},F=async l=>{if(confirm("Are you sure to delete this instrument?"))try{await f.delete(`/instruments/${l}`),u.value=u.value.filter(t=>t.id!==l)}catch{alert("Failed to delete instrument")}};return $(()=>{I()}),(l,t)=>(r(),i("div",N,[t[14]||(t[14]=e("h1",null,"Instruments",-1)),e("button",{onClick:t[0]||(t[0]=n=>d.value=!0)},"+ Add Instrument"),d.value?(r(),i("div",U,[e("form",{onSubmit:c(k,["prevent"])},[t[7]||(t[7]=e("label",null,"Name:",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.name=n),required:""},null,512),[[v,a.value.name]]),t[8]||(t[8]=e("label",null,"Description:",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.description=n)},null,512),[[v,a.value.description]]),t[9]||(t[9]=e("button",{type:"submit"},"Create",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=n=>d.value=!1)},"Cancel")],32)])):b("",!0),e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Actions")])],-1)),e("tbody",null,[(r(!0),i(x,null,V(u.value,n=>(r(),i("tr",{key:n.id},[e("td",null,y(n.name),1),e("td",null,y(n.description),1),e("td",null,[e("button",{onClick:D=>C(n)},"Edit",8,A),e("button",{onClick:D=>F(n.id)},"Delete",8,B)])]))),128))])]),m.value?(r(),i("div",E,[e("form",{onSubmit:c(w,["prevent"])},[t[11]||(t[11]=e("label",null,"Name:",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.value.name=n),required:""},null,512),[[v,s.value.name]]),t[12]||(t[12]=e("label",null,"Description:",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.value.description=n)},null,512),[[v,s.value.description]]),t[13]||(t[13]=e("button",{type:"submit"},"Update",-1)),e("button",{type:"button",onClick:t[6]||(t[6]=n=>m.value=!1)},"Cancel")],32)])):b("",!0)]))}},O=g(M,[["__scopeId","data-v-dc57e350"]]);export{O as default};
