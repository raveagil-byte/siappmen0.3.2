import{r as o,m as $,c as u,a as e,b,d as v,v as m,w as c,F as x,n as V,p as f,o as r,t as y}from"./index-DsZrCc_L.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"units"},A={key:0,class:"form-popup"},B=["onClick"],E=["onClick"],M={key:1,class:"form-popup"},S={__name:"Units",setup(j){const i=o([]),d=o(!1),p=o(!1),s=o({name:"",description:""}),a=o({id:null,name:"",description:""}),U=async()=>{try{const l=await f.get("/units");i.value=l.data.data}catch{alert("Failed to fetch units")}},k=async()=>{try{const l=await f.post("/units",s.value);i.value.push(l.data.data),s.value={name:"",description:""},d.value=!1}catch{alert("Failed to create unit")}},C=l=>{a.value=Object.assign({},l),p.value=!0},w=async()=>{try{await f.put(`/units/${a.value.id}`,{name:a.value.name,description:a.value.description});const l=i.value.findIndex(t=>t.id===a.value.id);l!==-1&&(i.value[l]=Object.assign({},a.value)),p.value=!1}catch{alert("Failed to update unit")}},F=async l=>{if(confirm("Are you sure to delete this unit?"))try{await f.delete(`/units/${l}`),i.value=i.value.filter(t=>t.id!==l)}catch{alert("Failed to delete unit")}};return $(()=>{U()}),(l,t)=>(r(),u("div",N,[t[14]||(t[14]=e("h1",null,"Units",-1)),e("button",{onClick:t[0]||(t[0]=n=>d.value=!0)},"+ Add Unit"),d.value?(r(),u("div",A,[e("form",{onSubmit:c(k,["prevent"])},[t[7]||(t[7]=e("label",null,"Name:",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.name=n),required:""},null,512),[[m,s.value.name]]),t[8]||(t[8]=e("label",null,"Description:",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.value.description=n)},null,512),[[m,s.value.description]]),t[9]||(t[9]=e("button",{type:"submit"},"Create",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=n=>d.value=!1)},"Cancel")],32)])):b("",!0),e("table",null,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Actions")])],-1)),e("tbody",null,[(r(!0),u(x,null,V(i.value,n=>(r(),u("tr",{key:n.id},[e("td",null,y(n.name),1),e("td",null,y(n.description),1),e("td",null,[e("button",{onClick:D=>C(n)},"Edit",8,B),e("button",{onClick:D=>F(n.id)},"Delete",8,E)])]))),128))])]),p.value?(r(),u("div",M,[e("form",{onSubmit:c(w,["prevent"])},[t[11]||(t[11]=e("label",null,"Name:",-1)),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>a.value.name=n),required:""},null,512),[[m,a.value.name]]),t[12]||(t[12]=e("label",null,"Description:",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>a.value.description=n)},null,512),[[m,a.value.description]]),t[13]||(t[13]=e("button",{type:"submit"},"Update",-1)),e("button",{type:"button",onClick:t[6]||(t[6]=n=>p.value=!1)},"Cancel")],32)])):b("",!0)]))}},O=g(S,[["__scopeId","data-v-59219d97"]]);export{O as default};
